<!doctype html>
<html lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/zh-CN/blog/rss.xml" title="Ready.Work Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-CN/blog/atom.xml" title="Ready.Work Blog Atom Feed"><title data-react-helmet="true">控制器 | Ready.Work</title><meta data-react-helmet="true" property="og:url" content="https://lyuweihua.github.io/zh-CN/docs/controller"><meta data-react-helmet="true" name="docusaurus_locale" content="zh-CN"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="控制器 | Ready.Work"><meta data-react-helmet="true" name="description" content="本框架基于Jfinal开发，Controller基本兼容原有工作模式。Controller为MVC模式中的控制器，基于本框架的Web应用的控制器需要继承该类。Controller是定义Action方法的地方，是组织Action的一种方式，一个Controller可以包含多个Action。"><meta data-react-helmet="true" property="og:description" content="本框架基于Jfinal开发，Controller基本兼容原有工作模式。Controller为MVC模式中的控制器，基于本框架的Web应用的控制器需要继承该类。Controller是定义Action方法的地方，是组织Action的一种方式，一个Controller可以包含多个Action。"><link data-react-helmet="true" rel="shortcut icon" href="/zh-CN/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://lyuweihua.github.io/zh-CN/docs/controller"><link data-react-helmet="true" rel="alternate" href="https://lyuweihua.github.io/docs/controller" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://lyuweihua.github.io/zh-CN/docs/controller" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://lyuweihua.github.io/docs/controller" hreflang="x-default"><link rel="stylesheet" href="/zh-CN/assets/css/styles.3aee0be5.css">
<link rel="preload" href="/zh-CN/assets/js/styles.96f10285.js" as="script">
<link rel="preload" href="/zh-CN/assets/js/runtime~main.419365fc.js" as="script">
<link rel="preload" href="/zh-CN/assets/js/main.aa12cbc9.js" as="script">
<link rel="preload" href="/zh-CN/assets/js/1.546c467a.js" as="script">
<link rel="preload" href="/zh-CN/assets/js/2.b134721d.js" as="script">
<link rel="preload" href="/zh-CN/assets/js/62.1a0d5637.js" as="script">
<link rel="preload" href="/zh-CN/assets/js/64.5d0d37cb.js" as="script">
<link rel="preload" href="/zh-CN/assets/js/935f2afb.305cabed.js" as="script">
<link rel="preload" href="/zh-CN/assets/js/17896441.b6f4f76e.js" as="script">
<link rel="preload" href="/zh-CN/assets/js/3068816b.5e76a317.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-CN/"><img src="/zh-CN/img/ready.png" alt="Ready.Work Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zh-CN/img/ready.png" alt="Ready.Work Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Ready.Work</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-CN/docs/">开发文档</a><a class="navbar__item navbar__link" href="/zh-CN/blog">开发动态</a><a class="navbar__item navbar__link" href="/zh-CN/hardware">配套硬件</a><a class="navbar__item navbar__link" href="/zh-CN/why">开发缘由</a><a class="navbar__item navbar__link" href="/zh-CN/shoulder">巨人的肩膀</a><a class="navbar__item navbar__link" href="/zh-CN/coming">开源计划</a><a class="navbar__item navbar__link" href="/zh-CN/medicine">医学探索</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>zh-CN</span></span></a><ul class="dropdown__menu"><li><a href="/docs/controller" target="_self" rel="noopener noreferrer" class="dropdown__link">en</a></li><li><a href="/zh-CN/docs/controller" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">zh-CN</a></li></ul></div><a href="https://github.com/LyuWeihua/ReadyWork" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/zh-CN/"><img src="/zh-CN/img/ready.png" alt="Ready.Work Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zh-CN/img/ready.png" alt="Ready.Work Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Ready.Work</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/zh-CN/docs/">开发文档</a></li><li class="menu__list-item"><a class="menu__link" href="/zh-CN/blog">开发动态</a></li><li class="menu__list-item"><a class="menu__link" href="/zh-CN/hardware">配套硬件</a></li><li class="menu__list-item"><a class="menu__link" href="/zh-CN/why">开发缘由</a></li><li class="menu__list-item"><a class="menu__link" href="/zh-CN/shoulder">巨人的肩膀</a></li><li class="menu__list-item"><a class="menu__link" href="/zh-CN/coming">开源计划</a></li><li class="menu__list-item"><a class="menu__link" href="/zh-CN/medicine">医学探索</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/docs/controller" target="_self" rel="noopener noreferrer" class="menu__link">en</a></li><li class="menu__list-item"><a href="/zh-CN/docs/controller" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active">zh-CN</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/LyuWeihua/ReadyWork" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">单体应用(Monolithic)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/">快速开始</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/install">安装</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/configuration">配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/logger">日志</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/aop">依赖注入/切面编程</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/zh-CN/docs/controller">控制器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/validator">参数校验器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/database">数据库-基础应用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/database-auto">数据库-Auto注解</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/database-advanced">数据库-高级应用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/modulization">应用模块化</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/event">事件驱动</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/security">安全策略</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/cache">缓存服务</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/websocket">Websocket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/time-uuid">时间服务/UUID服务</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/i18n">国际化支持</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">微服务应用(Microservices)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh-CN/docs/cloud-get-started">快速开始</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh-CN/docs/cloud-node-discovery">节点发现</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh-CN/docs/cloud-microservice">微服务应用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh-CN/docs/cloud-config-service">配置服务</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh-CN/docs/common-transaction">事务参考知识</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh-CN/docs/cloud-distributed-transaction">分布式事务</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh-CN/docs/cloud-distributed-database">分布式数据库</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">并行计算(Parallel Computing)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh-CN/docs/parallel-computing">并行计算</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh-CN/docs/parallel-ai">并行AI训练</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh-CN/docs/federated-learning">联邦学习</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">控制器</h1></header><div class="markdown"><p>本框架基于Jfinal开发，Controller基本兼容原有工作模式。Controller为MVC模式中的控制器，基于本框架的Web应用的控制器需要继承该类。Controller是定义Action方法的地方，是组织Action的一种方式，一个Controller可以包含多个Action。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="action-定义"></a>Action 定义<a class="hash-link" href="#action-定义" title="Direct link to heading">#</a></h2><p>Action 是请求的最小单位。Action 方法必须在 Controller 中定义，且必须是 public 可见性。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@RequestMapping(value = &quot;/&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class FirstController extends Controller {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @RequestMapping</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public Result&lt;String&gt; index() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return Success.of(&quot;hello world !&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="路由映射"></a>路由映射<a class="hash-link" href="#路由映射" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="通过注解映射"></a>通过注解映射<a class="hash-link" href="#通过注解映射" title="Direct link to heading">#</a></h4><ul><li>@RequestMapping注解加在控制器类上，用来绑定域名及映射主URL路径，@RequestMapping注解加在控制器的方法上，用来映射子路径。</li><li>@RequestMapping的host参数和subHost参数，只能用在控制器类上，用来指定绑定的主域名和子域名。前提条件是域名已经指向当前服务器IP地址。<div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>域名绑定</h5></div><div class="admonition-content"><p>域名绑定后，只有通过设置的域名才能访问到该控制器的方法上。域名绑定方便进行业务拆分，例如按省份拆分，同一个业务按省份分别用子域名绑定在不同的控制器。</p></div></div></li><li>@RequestMapping的value参数，可以用于控制器类及其方法上，用来指定映射路径，支持一次指定多个映射路径。</li><li>方法上的@RequestMapping的value参数如果为空，那么就会默认以方法名为value进行映射，如果方法名为index会被映射到&quot;/&quot;。</li><li>@RequestMapping的method参数，只能用于方法上，用于指定请求方式，默认值为GET和POST，即如果不指定将接受GET和POST的请求。</li><li>@RequestMapping的produces参数，只能用于方法上，用于指定该请求输出类型，有Json, Xml, General(文本或HTML输出)可选，默认值为Json。</li><li>@RequestMapping的viewPath参数，可以用于控制器类及其方法上，用于指定该控制器模版引擎的模版路径。</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="程序配置映射"></a>程序配置映射<a class="hash-link" href="#程序配置映射" title="Direct link to heading">#</a></h4><p>下面是一个控制器类，定义了2个方法，未做任何注解映射</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class ManualController extends Controller {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void index() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        renderText(&quot;this is a default index action, mapped manually&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void test() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        renderText(&quot;this is a test action, mapped manually&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>这里我们演示如何通过程序映射上面的控制器，在当前应用的主类中添加initialize()方法，该方法会在当前应用启动时初始化。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class Main extends Application {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    protected void initialize() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        route().add(new RouteConfig().addRoute(&quot;/&quot;, ManualController.class, &quot;index&quot;, null)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                .addRoute(&quot;/test/&quot;, ManualController.class, &quot;test&quot;, null));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public static void main(String[] args) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Ready.For(Main.class).Work(args);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>通过向路由配置中添加2组新的路由，指定映射URL路径和对应的控制器及方法名。通过RouteConfig可以设置和注解相同的各类参数。
注意，此时如果有其他控制器也映射在了&quot;/&quot;和&quot;/test/&quot;，那么此前的映射会被覆盖。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="模版"></a>模版<a class="hash-link" href="#模版" title="Direct link to heading">#</a></h2><p>尽管模版的应用当前已经不流行，但在许多场合还是一种比较方便快捷的开发方式。使用模版前需要在配置文件中设置viewPath，即模版路径。模版文件的扩展名默认为.html，可以通过viewFileExt配置项设置。</p><ul><li>如果模版是不需要变更的可以在当前项目的resources下建立一个模版目录存放，随后打包到Jar包中。例如：我们在当前项目的resources下建立一个名为view的子文件夹，用于存放模版文件。然后需要配置文件中设置viewPath=/view，这里的/相对于resources资源文件夹。</li><li>如果模版文件有可能需要变更的，最好在项目的工作空间中建立一个模版目录存放，随后还可以随时修改。例如：我们在当前项目工作空间ready.work文件夹中建立一个名为view的子文件夹，用于存放模版文件。然后需要配置文件中设置viewPath=/view，这里的/相对于ready.work工作空间。</li></ul><p>以上两者存放模版的方式，以下面一种优先，即如果在ready.work工作空间中已经存在了配置文件中指定的模版文件路径，那么就会使用该路径定位模版文件。如果ready.work工作空间中不存在设定的模版路径，默认会从resources资源文件夹去定位模版文件。请看实例：</p><p>通过配置文件指定模版路径：</p><div class="codeBlockContainer_K1bP"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_eoMF">bootstrap-dev.yml</div><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># configuration for dev environment</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">---</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">readyWork</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">viewPath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /view</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#viewFileExt: .html</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>通过程序设定模版路径：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class Main extends Application {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    protected void initialize() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        applicationConfig().setViewPath(&quot;/view&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public static void main(String[] args) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Ready.For(Main.class).Work(args);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>然后在对应路径的view文件夹下放置一个名为template.html的模版文件，最后在控制器中添加方法调用该模版文件。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@RequestMapping(value = &quot;/&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class MvcController extends Controller {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @RequestMapping</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public Result&lt;String&gt; index() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return Success.of(&quot;hello world !&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @RequestMapping()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void template() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        render(&quot;template&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>如果控制器和方法中的注解也指定了模版路径，那么该路径会相对于前面已经设置的主模版路径&quot;/view&quot;。
由于模版引擎继承自Enjoy Template Engine，模版语法请自行参阅<a href="https://jfinal.com/doc/6-1" target="_blank" rel="noopener noreferrer">https://jfinal.com/doc/6-1</a>。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="请求参数"></a>请求参数<a class="hash-link" href="#请求参数" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="常规参数"></a>常规参数<a class="hash-link" href="#常规参数" title="Direct link to heading">#</a></h4><p>在控制器中我们可以通过String getParam(String name)方法和支持默认值的String getParam(String name, String defaultValue)方法可以获取http请求中的参数，
通常我们获取到的参数是String类型，如果我们希望能一步到位的获取并转换为指定类型，可以使用getParamToInt、getParamToBoolean、getParamToDate、getParamToLong系列方法获取参数并直接转换为指定类型。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="路径参数"></a>路径参数<a class="hash-link" href="#路径参数" title="Direct link to heading">#</a></h4><p>路径参数的支持需要映射的路径中用大括号指定，例如：@RequestMapping(&quot;/company/{companyId}/worker/{workerId}&quot;)，这里指定了companyId和workerId两个路径参数，要获取这两个参数需要用getPathParam方法。
路径参数可以在控制器的映射路径中作为全局路径参数，也可以只在控制器下的方法中作为局部路径参数。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="参数注入"></a>参数注入<a class="hash-link" href="#参数注入" title="Direct link to heading">#</a></h4><p>通过中控制器中方法的参数前面加上注解@Param(&quot;参数名&quot;)，可以自动注入外部请求的参数。但该方式目前只支持常规参数注入，不支持路径参数注入。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="综合实例"></a>综合实例<a class="hash-link" href="#综合实例" title="Direct link to heading">#</a></h4><p>我们在上面的控制器例子中，添加一个param的方法，该方法的综合应用了上述特性。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@RequestMapping(value = &quot;/&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class MvcController extends Controller {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @RequestMapping</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public Result&lt;String&gt; index() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return Success.of(&quot;hello world !&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // http://127.0.0.1:8080/param/param1/param2/?age=99&amp;name=aaa</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @RequestMapping(&quot;/param/{p1}/{p2}/&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public Result&lt;String&gt; param( @Param(&quot;name&quot;) String name) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        String p1 = getPathParam(&quot;p1&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        String p2 = getPathParam(&quot;p2&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        int age = getParamToInt(&quot;age&quot;, 100);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return Success.of(&quot;p1=&quot; + p1 + &quot;, p2=&quot; + p2 + &quot;, name=&quot; + name + &quot;, age=&quot; + age);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @RequestMapping()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void template() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        render(&quot;template&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>假设该服务绑定在127.0.0.1的8080端口，用浏览器访问该路径(<a href="http://127.0.0.1:8080/param/param1/param2/?age=99&amp;name=aaa" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8080/param/param1/param2/?age=99&amp;name=aaa</a>)，将得到p1=param1, p2=param2, name=aaa, age=99</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="返回及渲染"></a>返回及渲染<a class="hash-link" href="#返回及渲染" title="Direct link to heading">#</a></h2><p>本框架封装了对Controller返回结果的渲染的过程，通常有两种结果需要返回给请求者，要么是数据要么是异常。如果需要使用框架的自动渲染，在定义Action的时候返回类型需要是Result类型。
正常数据用Success对象封装返回，失败或异常用Failure对象封装返回，框架会根据返回内容自动渲染。Json是当前最通用的API数据交换格式，框架默认将结果渲染为Json格式，通过指定RequestMapping的Produces，也支持以XML格式返回。
需要注意的是Failure返回时，需要先定义好错误码，错误码和错误信息有统一配置文件管理（默认为status.yml），这是框架强制要求。
如果不想通过框架自动渲染，由于本框架基于Jfinal开发，也保持了对Jfinal的渲染兼容。在定义Action的时候返回值设为void，然后通过render、renderJson、renderText、renderFile、renderHtml、renderXml等系列方法进行结果渲染。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="输出二维码"></a>输出二维码<a class="hash-link" href="#输出二维码" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@RequestMapping(value = &quot;/&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class MvcController extends Controller {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @RequestMapping</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void QrCode(){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        renderQrCode(&quot;LvWeiHua&quot;, 200, 200);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="文件上传"></a>文件上传<a class="hash-link" href="#文件上传" title="Direct link to heading">#</a></h2><p>文件上传一般通过multipart/form-data类型的POST请求向服务器发送文件内容，上传文件大小受到2个参数的制约，一个是WEB服务器的MaxEntitySize和每个上传文件的maxUploadFileSize，可以通过配置进行设定：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class Main extends Application {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    protected void initialize() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // 设置文件上传的保持路径，默认为当前工作空间的upload子目录，可以通过下面的方式修改路径</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        //applicationConfig().setUploadPath(&quot;/upload&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // 默认情况下文件上传是临时保存在内存(默认设置，小于100K的文件)或临时文件夹中的，然后需要通过程序在表单提交后保存到正式路径。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // 这样会从临时文件夹再保存到upload文件夹多了IO操作，这里可以设定不进行临时保存，而直接保存到upload文件夹中，该功能默认是关闭的。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        //applicationConfig().setDirectlySaveUploadFile(true);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // 每次FORM提交的总大小，指整个表单的全部字段及文件的总计字节数，这里设置容许最大 20M 的表单</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        serverConfig().setMaxEntitySize(20 * 1024 * 1024);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // 每次提交表单中单个文件的最大字节数，这里设置容许最大 10M 的文件上传</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        applicationConfig().setMaxUploadFileSize(10 * 1024 * 1024);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public static void main(String[] args) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Ready.For(Main.class).Work(args);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>表单提交后，文件就已经保存在服务器内存或临时文件中了，在Controller中可以通过getFile(&quot;name&quot;)或getFiles()方法获取上传的文件内容，再进一步保存到目标路径。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@RequestMapping(value = &quot;/&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class MvcController extends Controller {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @RequestMapping</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void upload() throws IOException {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(getRequest().getMethod().equals(RequestMethod.POST)) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            String result = &quot;&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            for(String name : getFiles().keySet()){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                result += name + &quot; =&gt; &quot; + getFiles().get(name).originalFileName + &quot; =&gt; &quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                if(getFiles().get(name).fileItem.isInMemory()) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    // 内存中的文件内容直接保存到指定路径的文件中</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    //getFiles().get(name).fileItem.write(Ready.root().resolve(Ready.getBootstrapConfig().getUploadPath()).resolve(&quot;filename&quot;));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    result += &quot;store in memory temporarily&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                } else {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    // 临时文件夹中的文件，直接移动该文件到指定路径，也可以像上面一样进行保存，但如果文件很大，这样会产生很多不必要的IO操作</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    //Files.move(getFiles().get(name).file, Ready.root().resolve(Ready.getBootstrapConfig().getUploadPath()).resolve(&quot;filename&quot;));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    result += &quot;store in file temporarily: &quot; + getFiles().get(name).fileItem.getFile().toString();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                result += &quot; &quot; + getFiles().get(name).fileItem.getFileSize() + &quot; bytes\r\n&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            renderText(result);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        } else {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            // upload模版就只有一个Form表单，用来上传文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            render(&quot;upload&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="文件下载"></a>文件下载<a class="hash-link" href="#文件下载" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@RequestMapping(value = &quot;/&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class MvcController extends Controller {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @RequestMapping</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void downloadFromResource(){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // 从Jar包或ClassPath中的resources文件夹中读取文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        renderFile(new File(Ready.getClassLoader().getResource(&quot;static/files/test.dat&quot;).getFile()), &quot;测试文件.dat&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @RequestMapping</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void downloadFromPath(){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // 从工作空间下的子文件夹中读取文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        renderFile(Ready.root().resolve(&quot;static/files/test.dat&quot;).toFile(), &quot;测试文件.dat&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>下载限流</h5></div><div class="admonition-content"><p>如果需要对下载进行限流，可以参考<a href="/zh-CN/docs/security#%E8%BF%9E%E6%8E%A5%E9%99%90%E5%88%B6">安全策略中关于网络安全-连接限制</a>相关文档。</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="静态文件映射"></a>静态文件映射<a class="hash-link" href="#静态文件映射" title="Direct link to heading">#</a></h2><p>经常需要将静态文件路径映射到某个url地址，下面的例子将/favicon.ico地址映射到工作空间下面的/static/favicon.ico，将/download/地址映射到工作空间下面的/download/文件夹。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class Main extends Application {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    protected void initialize() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        applicationConfig().getStaticResource().setMapping(&quot;/favicon.ico&quot;, &quot;/static/favicon.ico&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                        .setMapping(&quot;/download/&quot;,&quot;/download/&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        handler().addHandler(StaticResourceHandler.class);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public static void main(String[] args) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Ready.For(Main.class).Work(args);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="文件管理器"></a>文件管理器<a class="hash-link" href="#文件管理器" title="Direct link to heading">#</a></h2><p>有时候需要有一个便捷快速的方法导出服务器静态文件目录供浏览和下载，下面实例映射URL地址/list到工作空间下的/static/files/文件夹，通过浏览器即可访问该文件夹下的文件及其子文件夹。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class Main extends Application {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    protected void initialize() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        applicationConfig().getStaticResource().getPathResource().addPath(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                new PathResource().setPath(&quot;/list&quot;).setBasePath(&quot;/static/files/&quot;).setPrefix(true).setDirectoryListingEnabled(true));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        handler().addHandler(PathResourceHandler.class);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public static void main(String[] args) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Ready.For(Main.class).Work(args);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="静态资源绑定域名"></a>静态资源绑定域名<a class="hash-link" href="#静态资源绑定域名" title="Direct link to heading">#</a></h2><p>经常需要将图片文件夹或下载文件夹单独绑定到images.xxx.com、download.xxx.com这样的子域名下，方便随时变更服务器或者做负载均衡、CDN加速等部署，下面实例映射本地域名images.localhost的URL地址/到工作空间下的/static/images/文件夹。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class Main extends Application {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    protected void initialize() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        applicationConfig().getStaticResource().getVirtualHost().addHost(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                new VirtualHost().setDomain(&quot;images.localhost&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                .setPath(&quot;/&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                .setBasePath(&quot;/static/images/&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                .setDirectoryListingEnabled(true) // 如果不需要将文件都列出，可以去掉此项设置</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        handler().addHandler(VirtualHostHandler.class);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public static void main(String[] args) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Ready.For(Main.class).Work(args);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>注意，上面的例子需要自行修改hosts文件，添加images.localhost指向127.0.0.1地址才能访问。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cookie"></a>Cookie<a class="hash-link" href="#cookie" title="Direct link to heading">#</a></h2><p>在控制器中，我们可以通过setCookie和getCookie系列方法对Cookie进行操作。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="session"></a>Session<a class="hash-link" href="#session" title="Direct link to heading">#</a></h2><p>在控制器中，我们可以通过getSession来获得session对象来对session进行操作，或者也可以直接用setSessionAttr和getSessionAttr系列方法对Session进行操作。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="request和response对象"></a>Request和Response对象<a class="hash-link" href="#request和response对象" title="Direct link to heading">#</a></h2><p>在控制器中，我们可以通过getRequest()和getResponse()获得HttpRequest和HttpResponse对象。通过这两个对象可以对http请求的输入和输出进行更加底层的操作。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="更多细节"></a>更多细节<a class="hash-link" href="#更多细节" title="Direct link to heading">#</a></h2><p>由于MVC相关内容较多，以上只列举部分重点内容。后续逐步完善更多具体的文档，并对重点内容进行专题描述。</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/LyuWeihua/ReadyWork/edit/master/website/docs/controller.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh-CN/docs/aop"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 依赖注入/切面编程</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh-CN/docs/validator"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">参数校验器 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#action-定义" class="table-of-contents__link">Action 定义</a></li><li><a href="#路由映射" class="table-of-contents__link">路由映射</a></li><li><a href="#模版" class="table-of-contents__link">模版</a></li><li><a href="#请求参数" class="table-of-contents__link">请求参数</a></li><li><a href="#返回及渲染" class="table-of-contents__link">返回及渲染</a></li><li><a href="#输出二维码" class="table-of-contents__link">输出二维码</a></li><li><a href="#文件上传" class="table-of-contents__link">文件上传</a></li><li><a href="#文件下载" class="table-of-contents__link">文件下载</a></li><li><a href="#静态文件映射" class="table-of-contents__link">静态文件映射</a></li><li><a href="#文件管理器" class="table-of-contents__link">文件管理器</a></li><li><a href="#静态资源绑定域名" class="table-of-contents__link">静态资源绑定域名</a></li><li><a href="#cookie" class="table-of-contents__link">Cookie</a></li><li><a href="#session" class="table-of-contents__link">Session</a></li><li><a href="#request和response对象" class="table-of-contents__link">Request和Response对象</a></li><li><a href="#更多细节" class="table-of-contents__link">更多细节</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">开发文档</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh-CN/docs/">快速开始</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">源码仓库</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/LyuWeihua/ReadyWork" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">更多</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh-CN/blog">开发动态</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Ready.Work</div></div></div></footer></div>
<script src="/zh-CN/assets/js/styles.96f10285.js"></script>
<script src="/zh-CN/assets/js/runtime~main.419365fc.js"></script>
<script src="/zh-CN/assets/js/main.aa12cbc9.js"></script>
<script src="/zh-CN/assets/js/1.546c467a.js"></script>
<script src="/zh-CN/assets/js/2.b134721d.js"></script>
<script src="/zh-CN/assets/js/62.1a0d5637.js"></script>
<script src="/zh-CN/assets/js/64.5d0d37cb.js"></script>
<script src="/zh-CN/assets/js/935f2afb.305cabed.js"></script>
<script src="/zh-CN/assets/js/17896441.b6f4f76e.js"></script>
<script src="/zh-CN/assets/js/3068816b.5e76a317.js"></script>
</body>
</html>